DROP DATABASE IF EXISTS artisan_market_place;
CREATE DATABASE artisan_market_place;

DROP TABLE IF EXISTS user_details;
CREATE TABLE user_details (
    user_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    first_name VARCHAR(32) NOT NULL,
    middle_name VARCHAR(32),
    last_name VARCHAR(32) NOT NULL,
    email VARCHAR(128) NOT NULL UNIQUE,
    phone_number VARCHAR(16) NOT NULL UNIQUE,
    company_name VARCHAR(128),
    gst_number VARCHAR(32),
    status VARCHAR(16) NOT NULL,
    rating VARCHAR(16),
    is_admin BOOLEAN,
    country_code VARCHAR(8),
    role VARCHAR(32),
    creation_date DATETIME NOT NULL,
    created_by VARCHAR(128),
    last_update_date DATETIME NOT NULL,
    last_updated_by VARCHAR(128)
);

DROP TABLE IF EXISTS user_login_info;
CREATE TABLE user_login_info (
    login_info_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    user_id BIGINT NOT NULL,
    login_id VARCHAR(255) NOT NULL,
    password VARCHAR(255) NOT NULL,
    creation_date DATETIME NOT NULL,
    created_by VARCHAR(128),
    last_update_date DATETIME NOT NULL,
    last_updated_by VARCHAR(128),
    FOREIGN KEY (user_id) REFERENCES user_details(user_id)
);

DROP TABLE IF EXISTS bank_account;
CREATE TABLE bank_account (
    bank_account_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    user_id BIGINT NOT NULL,
    account_holder_name VARCHAR(128) NOT NULL,
    account_number VARCHAR(32) NOT NULL UNIQUE,
    ifsc_code VARCHAR(16) NOT NULL,
    bank_name VARCHAR(64) NOT NULL,
    branch_name VARCHAR(100) NOT NULL,
    account_type VARCHAR(20) NOT NULL, -- Example: 'SAVINGS', 'CURRENT'
    is_active BOOLEAN NOT NULL DEFAULT TRUE,
    creation_date DATETIME NOT NULL,
    created_by VARCHAR(128),
    last_update_date DATETIME NOT NULL,
    last_updated_by VARCHAR(128),
    CONSTRAINT fk_user_id FOREIGN KEY (user_id) REFERENCES user_details(user_id)
);

DROP TABLE IF EXISTS credit_card;
CREATE TABLE credit_card (
    card_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    user_id BIGINT NOT NULL,
    card_holder_name VARCHAR(128) NOT NULL,
    card_number VARCHAR(16) NOT NULL UNIQUE,
    expiry_date DATE NOT NULL,
    cvv VARCHAR(3) NOT NULL,
    card_type VARCHAR(32) NOT NULL, -- Example: 'VISA', 'MASTERCARD', 'RUPAY'
    is_active BOOLEAN NOT NULL DEFAULT TRUE,
    creation_date DATETIME NOT NULL,
    created_by VARCHAR(128),
    last_update_date DATETIME NOT NULL,
    last_updated_by VARCHAR(128),
    CONSTRAINT fk_credit_card_user FOREIGN KEY (user_id) REFERENCES user_details(user_id)
);

CREATE TABLE admin_address (
    address_id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT,
    address1 VARCHAR(256) NOT NULL,
    address2 VARCHAR(256),
    raw_address VARCHAR(256),
    city VARCHAR(64) NOT NULL,
    state VARCHAR(64) NOT NULL,
    country VARCHAR(32) NOT NULL,
    zip_code VARCHAR(32) NOT NULL,
    latitude DOUBLE,
    longitude DOUBLE,
    creation_date DATETIME NOT NULL,
    created_by VARCHAR(128),
    last_update_date DATETIME NOT NULL,
    last_updated_by VARCHAR(128),
    CONSTRAINT fk_address__user_id FOREIGN KEY (user_id) REFERENCES user_details(user_id)
);